# DiffViewer Component Enhancement

## 问题描述
需要改进 DiffViewer 组件，使其更专业、更易用，并提供更好的代码差异展示体验。

## 思考过程

1. **需求分析**
   - 根据 PRD.md，项目需要提供优秀的用户体验
   - DiffViewer 是代码审查的核心组件
   - 需要支持语法高亮和行号显示

2. **技术选择**
   - 使用 react-syntax-highlighter 进行代码高亮
   - 选择 vscDarkPlus 主题以匹配 VSCode 风格
   - 保持 Jotai 作为状态管理方案

3. **改进点**
   - 添加语法高亮支持
   - 实现文件类型自动检测
   - 优化空状态展示
   - 实现关闭功能
   - 改进 UI/UX 细节

## 实现方案

1. **组件结构优化**
   - 添加 DiffLine 子组件用于单行展示
   - 使用 useMemo 优化语言检测和行解析
   - 添加文件类型到语言的映射

2. **功能增强**
   - 实现文件关闭功能
   - 添加文件路径和统计信息的 tooltip
   - 优化空状态提示

3. **UI 改进**
   - 使用 SyntaxHighlighter 替换原生 pre/code
   - 添加透明背景支持
   - 优化行号显示

## 后续优化建议

1. 添加代码折叠功能
2. 实现行内注释功能
3. 添加文件对比模式
4. 优化大文件加载性能
